# Prometheus, Alertmanager and Graphana Examples

PromptQL.yaml представляет собой конфигурацию для инструмента Sloth, который используется для декларативного описания SLO (Service Level Objectives) и автоматического генерирования правил мониторинга для Prometheus и Alertmanager.

В конфигурации задаётся SLO для доступности HTTP-запросов сервиса myservice. Цель доступности установлена на уровне 99,9%, что означает, что допускается 1 ошибка на 1000 запросов. Для отслеживания ошибок используются PromQL-запросы, которые подсчитывают количество запросов с кодами состояния 5xx и 429 (ошибки и ограничения по числу запросов) и общее количество запросов.

Также настроены алертинг (система оповещений) для мониторинга превышения допустимого уровня ошибок. При превышении порога генерируются оповещения разной степени критичности: page_alert для срочных реагирований и ticket_alert для менее срочных, но требующих внимания проблем.

Sloth.dev выдает результат, который размещён в prometheus.yaml и имеет следующее значение:
Данный фрагмент представляет собой конфигурацию, сгенерированную инструментом Sloth для работы с SLO (Service Level Objectives) и SLI (Service Level Indicators) в системе мониторинга Prometheus.

В коде определяются правила для записи и вычисления различных метрик, связанных с доступностью сервиса и частотой ошибок в ответах на HTTP-запросы. Эти метрики вычисляются для разных временных окон (от 5 минут до 30 дней) и позволяют отслеживать, насколько хорошо сервис соответствует установленным целям по доступности.

Также в конфигурации заданы правила для оповещения о высоких уровнях ошибок, которые могут привести к превышению бюджета ошибок и нарушению SLO. Оповещения настроены для разных уровней серьёзности и могут быть отправлены в Slack или использованы для создания тикетов.

Этот подход позволяет команде разработчиков и SRE-инженерам отслеживать состояние сервиса, оперативно реагировать на проблемы и принимать обоснованные решения о внесении изменений в систему, учитывая текущий бюджет ошибок и цели по доступности.
